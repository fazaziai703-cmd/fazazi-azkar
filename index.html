<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تطبيق الأذكار</title>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Amiri&family=Noto+Naskh+Arabic&family=Lateefah&family=Scheherazade+New&display=swap" rel="stylesheet">
  
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" xintegrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Stylesheet -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Side Navigation for Azkar List -->
  <div id="mySidenav" class="sidenav">
    <button class="closebtn" onclick="closeNav()">&times;</button>
    <h3><i class="fas fa-list"></i> قائمة الأذكار</h3>
    <a href="#" onclick="openTab('mainTab')"><i class="fas fa-home"></i> الرئيسية</a>
    <a href="#" onclick="openTab('settingsTab')"><i class="fas fa-cog"></i> الإعدادات</a>
    <a href="#" onclick="openTab('aboutTab')"><i class="fas fa-info-circle"></i> عن التطبيق</a>
  </div>

  <!-- Main Header -->
  <div class="header">
    <button class="openbtn" onclick="toggleNav()">&#9776;</button>
    <h1 id="appTitle">تطبيق الأذكار</h1>
  </div>

  <!-- Main Content Area -->
  <div class="container main-content-padding">
    <!-- Content will be dynamically loaded here by script.js functions (renderMainPage, renderAzkarPage, etc.) -->
    <div id="mainTab" class="tab-content active">
      <!-- Initial content rendered by renderMainPage() -->
    </div>
    <div id="settingsTab" class="tab-content">
      <!-- Settings content -->
      <div class="settings-section">
        <h3>الوضع الليلي</h3>
        <label class="switch">
          <input type="checkbox" id="darkModeToggle">
          <span class="slider round"></span>
        </label>
      </div>

      <div class="settings-section">
        <h3>اختيار الثيم</h3>
        <select id="themeSelector">
          <option value="default">الافتراضي (أخضر)</option>
          <option value="blue">أزرق</option>
          <option value="purple">بنفسجي</option>
          <option value="orange">برتقالي</option>
        </select>
      </div>

      <div class="settings-section">
        <h3>اختيار الخط</h3>
        <select id="fontSelector">
          <option value="Amiri">الأميري</option>
          <option value="Noto Naskh Arabic">الخط النسخي</option>
          <option value="Lateefah">لطيفة</option>
          <option value="Scheherazade New">شهرزاد</option>
        </select>
      </div>

      <div class="settings-section">
        <h3>حجم الخط</h3>
        <input type="range" id="fontSizeRange" min="0.8" max="1.5" step="0.1" value="1.1">
        <span id="currentFontSize">1.1em</span>
      </div>

      <div class="settings-section">
        <h3>تخطي الذكر تلقائياً عند الانتهاء</h3>
        <label class="switch">
          <input type="checkbox" id="autoSkipToggle">
          <span class="slider round"></span>
        </label>
      </div>

      <div class="settings-section">
        <h3>تفعيل الإشعارات (تذكيرات)</h3>
        <label class="switch">
          <input type="checkbox" id="notificationToggle">
          <span class="slider round"></span>
        </label>
      </div>

      <div class="settings-section">
        <h3>تذكير بأذكاري الخاصة</h3>
        <label class="switch">
          <input type="checkbox" id="customAzkarReminderToggle">
          <span class="slider round"></span>
        </label>
      </div>
    </div>
    <div id="aboutTab" class="tab-content">
      <!-- About content -->
      <h2>عن تطبيق الأذكار</h2>
      <p>تطبيق الأذكار هو رفيقك اليومي لتذكيرك بأذكار الصباح والمساء والنوم وغيرها، مع ميزات متقدمة لمساعدتك على الحفاظ على وردك اليومي.</p>
      <p>تم تطوير هذا التطبيق بحب وإخلاص لخدمة المسلمين، ونسأل الله أن يجعله خالصاً لوجهه الكريم.</p>
      <p>نأمل أن يكون هذا التطبيق عوناً لك في ذكر الله تعالى في كل وقت وحين.</p>
      <p>لأي اقتراحات أو ملاحظات، لا تتردد في التواصل معنا.</p>
      <p>مع خالص الدعوات لوالدنا الفاضل/ أبو عمران الفزازي، ولابني عمران (عبقرينو)، مع دعواتي له بدوام التفوق والتوفيق. والدكم المحب/ أبو عمران الفزازي</p>
    </div>
  </div>
  
  <!-- Fixed bottom buttons -->
  <div class="top-fixed-buttons">
    <button class="button" style="background:#2196f3;" onclick="openTab('mainTab')"><i class="fas fa-home"></i> العودة للقائمة الرئيسية</button>
    <button class="button" style="background:#607d8b;" onclick="resetApp()"><i class="fas fa-sync-alt"></i> إعادة تعيين التطبيق</button>
    <button id="installAppBtn" class="button" style="background:#8bc34a; display:none;"><i class="fas fa-plus"></i> تثبيت التطبيق</button>
  </div>

  <!-- Reusable Modal for Info, Share, and Confirmations -->
  <div id="appModal" class="modal-overlay">
    <div class="modal-content">
      <h3 id="modalTitle">
        <button class="close-button" onclick="closeModal()"><i class="fas fa-times-circle"></i></button>
        <span id="modalHeaderText"></span>
      </h3>
      <div id="modalBody"></div>
      <div id="modalButtons"></div>
    </div>
  </div>

  <!-- JavaScript file -->
  <script src="script.js"></script>

  <!-- PWA Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js') // Use relative path
          .then(registration => {
            console.log('Service Worker registered successfully with scope:', registration.scope);
          })
          .catch(error => {
            console.error('Service Worker registration failed:', error);
          });
      });
    }

    // Handle PWA install prompt
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      const installAppBtn = document.getElementById('installAppBtn');
      if (installAppBtn) {
        installAppBtn.style.display = 'block'; // Show install button
        installAppBtn.onclick = showInstallPrompt;
      }
    });

    window.addEventListener('appinstalled', () => {
      console.log('PWA was installed');
      const installAppBtn = document.getElementById('installAppBtn');
      if (installAppBtn) {
        installAppBtn.style.display = 'none'; // Hide install button after install
      }
    });
  </script>
</body>
</html>
