<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تطبيق الأذكار</title>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Amiri&family=Noto+Naskh+Arabic&family=Lateefah&family=Scheherazade+New&display=swap" rel="stylesheet">
  
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Stylesheet -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Side Navigation for Azkar List -->
  <div id="mySidenav" class="sidenav">
    <button class="closebtn" onclick="closeNav()">&times;</button>
    <h3><i class="fas fa-list"></i> قائمة الأذكار</h3>
    <div id="sidenavAzkarList">
      <!-- Azkar links will be populated by script.js -->
    </div>
  </div>

  <!-- Button to toggle side navigation -->
  <button class="sidenav-toggle-btn" onclick="toggleNav()">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Main container -->
  <div class="container main-content-padding">
    <div class="tabs">
      <button class="tab-button active" onclick="openTab('mainTab', this)"><i class="fas fa-list"></i> الأذكار</button>
      <button class="tab-button" onclick="openTab('settingsTab', this)"><i class="fas fa-cog"></i> الإعدادات</button>
      <button class="tab-button" onclick="openTab('statsTab', this)"><i class="fas fa-chart-bar"></i> إحصائياتي</button>
    </div>

    <!-- Main Tab for Azkar selection and display -->
    <div id="mainTab" class="tab-content active">
      <!-- Content is rendered by script.js -->
    </div>

    <!-- Settings Tab -->
    <div id="settingsTab" class="tab-content">
      <div class="settings-section">
        <h2>إعدادات التطبيق</h2>

        <div class="settings-option">
          <label for="darkModeToggle">الوضع الليلي:</label>
          <div>
            <button id="darkModeToggle" class="button" onclick="toggleDarkMode()" style="background: var(--button-bg-reset);"><i class="fas fa-moon"></i> <span id="darkModeText"></span></button>
          </div>
        </div>

        <div class="settings-option">
          <label for="notificationToggle">تفعيل إذن الإشعارات (تجريبي):</label>
          <div>
            <button id="notificationToggle" class="button" onclick="toggleAzkarNotification()" style="background: var(--button-bg-reset);"><i class="fas fa-bell"></i> <span id="notificationText"></span></button>
          </div>
        </div>

        <div class="settings-option">
          <label for="fontSelect">نوع الخط:</label>
          <div>
            <select id="fontSelect" onchange="changeFont()">
              <option value="'Amiri', serif">خط الأميري (افتراضي)</option>
              <option value="'Noto Naskh Arabic', serif">Noto Naskh Arabic</option>
              <option value="'Lateefah', serif">Lateefah</option>
              <option value="'Scheherazade New', serif">Scheherazade New</option>
              <option value="sans-serif">خط النظام (Sans-serif)</option>
            </select>
          </div>
        </div>

        <div class="settings-option">
            <label for="fontSizeRange">حجم الخط:</label>
            <div>
                <input type="range" id="fontSizeRange" min="0.8" max="1.5" step="0.1" value="1.1" oninput="changeFontSize(this.value)">
                <span id="fontSizeValue">1.1em</span>
            </div>
        </div>

        <div class="settings-option">
          <label for="fontColorPicker">لون الخط:</label>
          <div>
            <input type="color" id="fontColorPicker" onchange="changeColors()">
          </div>
        </div>

        <div class="settings-option">
          <label for="bgColorPicker">لون الخلفية الرئيسية:</label>
          <div>
            <input type="color" id="bgColorPicker" onchange="changeColors()">
          </div>
        </div>

        <div class="settings-option">
            <label>الثيمات الجاهزة:</label>
            <div class="theme-buttons">
                <button class="button" style="background:#4CAF50;" onclick="applyTheme('green')">أخضر</button>
                <button class="button" style="background:#2196F3;" onclick="applyTheme('blue')">أزرق</button>
                <button class="button" style="background:#795548;" onclick="applyTheme('brown')">بني</button>
                <button class="button" style="background:#9E9E9E;" onclick="applyTheme('default')">افتراضي</button>
            </div>
        </div>

        <div class="settings-option">
            <label for="resetSettingsBtn">إعادة ضبط الإعدادات:</label>
            <div>
                <button id="resetSettingsBtn" class="button" onclick="confirmResetSettings()"><i class="fas fa-undo"></i> إعادة ضبط</button>
            </div>
        </div>

      </div>
    </div>

    <!-- Stats Tab -->
    <div id="statsTab" class="tab-content">
        <div class="settings-section">
            <h2>إحصائيات الأذكار</h2>
            <p>هذا القسم قيد التطوير. هنا يمكنك رؤية ملخص لنشاطك في تكرار الأذكار.</p>
			<p>لأي تعليق بشأن البرنامج الرجاء مراسلتي على البريد الالكتروني: salaheldin.abdelrahman703@gmail.com</p>
            <div id="dailyStats" style="border: 1px dashed var(--border-color); padding: 15px; border-radius: 8px; margin-top: 20px; text-align: center;">
                <p>عدد الأذكار المكتملة اليوم: <strong id="completedAzkarToday">0</strong></p>
                <p>إجمالي الأذكار المكتملة: <strong id="totalCompletedAzkar">0</strong></p>
                <p>آخر جلسة مكتملة: <strong id="lastSessionDate">لا توجد</strong></p>
            </div>
            <button class="button" style="background:var(--button-bg-reset); margin-top:20px;" onclick="confirmResetStats()"><i class="fas fa-eraser"></i> مسح الإحصائيات</button>
        </div>
    </div>

  </div>

  <!-- Footer -->
  <div class="footer">
    بِفَضلِ اللهِ وَعَوْنِه، تَمَّ تَصميمُ هَذَا العَمَلِ الْمُبَارَكِ لِيَكُونَ مَعِينَاً لَكُمْ فِي ذِكرِ اللهِ، جَعَلَهُ اللهُ خَالِصاً لِوَجْهِهِ الكَرِيمِ.
    نَسْأَلُكُمْ دَعْوَةً بِالرَّحمَةِ وَالمَغْفِرَةِ لِكُلِّ مَن سَاهَمَ فِيهِ، وَأَن يُرْزَقَنَا اللهُ الفِردَوْسَ الأَعلَى مِن غَيْرِ حِسَابٍ وَلَا سَابِقَةِ عَذَابٍ.إهداء الى ابني عمران (عبقرينو)، مع دعواتي له بدوام التفوق والتوفيق. والدكم المحب/ أبو عمران الفزازي
  </div>
  
  <!-- Fixed bottom buttons -->
  <div class="top-fixed-buttons">
    <button class="button" style="background:#607d8b;" onclick="resetApp()"><i class="fas fa-home"></i> العودة للقائمة الرئيسية</button>
    <button id="installAppBtn" class="button" style="background:#8bc34a; display:none;"><i class="fas fa-plus"></i> تثبيت التطبيق</button>
  </div>

  <!-- Reusable Modal for Info, Share, and Confirmations -->
  <div id="appModal" class="modal-overlay">
    <div class="modal-content">
      <h3 id="modalTitle">
        <button class="close-button" onclick="closeModal()"><i class="fas fa-times-circle"></i></button>
        <span id="modalHeaderText"></span>
      </h3>
      <div id="modalBody"></div>
      <div id="modalButtons"></div>
    </div>
  </div>

  <!-- JavaScript file -->
  <script src="script.js"></script>

  <!-- PWA Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js') // Use relative path
          .then(registration => {
            console.log('Service Worker registered successfully with scope: ', registration.scope);
          })
          .catch(err => {
            console.log('Service Worker registration failed: ', err);
          });
      });
    }
  </script>
</body>
</html>
